jQuery(document).ready(function(c){var b;var d;var a;jQuery(".button.upload").live("click",function(e){d=jQuery(this).parent().attr("id");e.preventDefault();if(b){b.open();return}b=wp.media.frames.file_frame=wp.media({title:data.uploader_title,button:{text:data.uploader_button_text},multiple:false});b.on("select",function(){a=jQuery("img#"+d);var f=jQuery("input[name='"+d+"']");attachment=b.state().get("selection").first().toJSON();jQuery(f).val(attachment.id);jQuery(a).attr("src",attachment.url);jQuery(a).removeAttr("hidden")});b.open()});jQuery(".button.generate").live("click",function(e){jQuery.ajax({type:"POST",url:data.admin_url,data:{action:"pnfw_create_vapid_keys",nonce:data.nonce},success:function(g){const f=g.data.privateKey.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");const h=g.data.publicKey.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");jQuery("#pnfw_web_push_vapid_private_key").val(f);jQuery("#pnfw_web_push_vapid_public_key").val(h)},error:function(h,f,g){alert("Ops! "+g+". Could be a missing a PHP module (e.g.: gmp, mbstring, curl, openssl)? Eventually, however, you can create the VAPID keys by hand.")}})})});